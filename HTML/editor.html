<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Range ê¸°ë°˜ ì‹¬í”Œ ì›¹ ì—ë””í„°</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .toolbar {
            margin-bottom: 10px;
        }

        .toolbar button,
        .toolbar input[type="color"] {
            padding: 6px 10px;
            margin-right: 5px;
            cursor: pointer;
        }

        .editor {
            border: 1px solid #ccc;
            min-height: 150px;
            padding: 10px;
        }

        .editor:focus {
            outline: none;
            border-color: #4a90e2;
        }

        .output {
            margin-top: 15px;
            padding: 10px;
            background: #f9f9f9;
            border: 1px solid #ccc;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>

<h2>ğŸ“ Range ê¸°ë°˜ ì›¹ ì—ë””í„°</h2>

<div class="toolbar">
    <button onclick="applyStyle('bold')"><b>B</b></button>
    <button onclick="applyStyle('italic')"><i>I</i></button>
    <button onclick="applyStyle('underline')"><u>U</u></button>
    <input type="color" onchange="applyColor(this.value)">
    <button onclick="saveContent()">ì €ì¥</button>
</div>

<div id="editor" class="editor" contenteditable="true">
    ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê³  ë“œë˜ê·¸í•´ë³´ì„¸ìš” âœ¨
</div>

<h3>ğŸ“Œ ì €ì¥ëœ HTML ì½”ë“œ</h3>
<div id="output" class="output"></div>

<script>
    function getRange() {
        const selection = window.getSelection();
        if (!selection || selection.rangeCount === 0) return null;
        return selection.getRangeAt(0);
    }

    function applyStyle(type) {
        const range = getRange();
        if (!range || range.collapsed) return;

        let wrapper;

        switch (type) {
            case 'bold':
                wrapper = document.createElement('strong');
                break;
            case 'italic':
                wrapper = document.createElement('em');
                break;
            case 'underline':
                wrapper = document.createElement('u');
                break;
        }

        wrapRange(range, wrapper);
    }

    function applyColor(color) {
        const range = getRange();
        if (!range || range.collapsed) return;

        const span = document.createElement('span');
        span.style.color = color;

        wrapRange(range, span);
    }

    function wrapRange(range, wrapper) {
        const content = range.extractContents();
        wrapper.appendChild(content);
        range.insertNode(wrapper);

        // ì»¤ì„œ ìœ„ì¹˜ ì •ë¦¬
        const selection = window.getSelection();
        selection.removeAllRanges();

        const newRange = document.createRange();
        newRange.selectNodeContents(wrapper);
        newRange.collapse(false);
        selection.addRange(newRange);
    }

    function saveContent() {
        const html = document.getElementById('editor').innerHTML;
        document.getElementById('output').textContent = html;
    }
</script>

</body>
</html>